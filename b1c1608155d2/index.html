<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="msvalidate.01" content="A7B4DB5A7BF5E5C6E52E34BB024D6319"><meta name="description" content="本站为 Yurchiu 用来记录 OI、笔记、感想的 Blog，欢迎来到本博客！希望我们能相互交流，共同进步～"><meta http-equiv="content-language" content="zh-cn"><title>P7078 [CSP-S2020] 贪吃蛇 | Yurchiu's Blog</title><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.min.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.4.17/sweetalert2.all.min.js"></script><script src="https://cdn.staticfile.org/sketch.js/1.0/sketch.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><script src="/js/chaffle.min.js"></script><script src="/js/core/main.js"></script><script src="/js/core/search.js"></script><script src="/js/core/initialization.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.6/katex.min.css"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/vs2015.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/colors/std.css"><link rel="stylesheet" href="/css/colors/white.css"><link rel="stylesheet" href="/css/colors/night.css"><link rel="stylesheet" href="/css/colors/trans.css"><link rel="stylesheet" href="/css/special/special.css"><link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Yurchiu's Blog" type="application/atom+xml"></head><body style="background-image:url(/img/new-bgp.jpg)"><div id="YurLoading" class="YurLoading"><div class="inner"><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div></div></div><div class="topbar"><a onclick="topbarToggle()" class="topbar-menu" style="cursor:pointer"><i class="fa fa-bars"></i> </a><a href="/" class="topbar-title"><i class="fa fa-home"></i> Yurchiu's Blog </a><a target="_blank" rel="noopener" href="https://github.com/yz-hs" class="topbar-title"><i class="fa fa-github"></i></a></div><div id="article-container"><div class="sidebar"><div class="avatar-container"><img src="/img/new-avatar.jpg" class="avatar revolve"></div><div class="sidebar-author">Yurchiu<br><span class="mini-text">An AFO whker.</span></div><div class="sidebar-list-container"><div style="height:10px"></div><a class="list-group-item" href="/"><div><i class="fa fa-home fa-fw"></i>&nbsp; 首页</div><div class="badge"></div></a><a class="list-group-item" href="/archives/"><div><i class="fa fa-tasks fa-fw"></i>&nbsp; 归档</div><div class="badge">157</div></a><a class="list-group-item" href="/tags/"><div><i class="fa fa-tags fa-fw"></i>&nbsp; 标签</div><div class="badge">69</div></a><a class="list-group-item" href="/categories/"><div><i class="fa fa-th-large fa-fw"></i>&nbsp; 分类</div><div class="badge">13</div></a><a class="list-group-item" href="/somepage/mood/"><div><i class="fa fa-photo fa-fw"></i>&nbsp; 说说</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/about/"><div><i class="fa fa-user-o fa-fw"></i>&nbsp; 关于</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/chat/"><div><i class="fa fa-commenting-o fa-fw"></i>&nbsp; 留言</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/link/"><div><i class="fa fa-link fa-fw"></i>&nbsp; 链接</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/settings/"><div><i class="fa fa-cog fa-fw"></i>&nbsp; 设置</div><div class="badge"></div></a><div style="height:200px"></div></div><div class="sidebar-footer"><div class="item" id="back2Top" data-bs-toggle="tooltip" title="顶部"><i class="fa fa-arrow-circle-up"></i></div><div class="item" data-bs-toggle="tooltip" title="RSS"><a href="/atom.xml"><i class="fa fa-feed"></i></a></div><div class="item" data-bs-toggle="tooltip" title="搜索"><a href="/somepage/search/"><i class="fa fa-search"></i></a></div></div></div><div class="article"><div class="vertical fake-sidebar"></div><div class="vertical post"><div class="header"><h1 class="title">P7078 [CSP-S2020] 贪吃蛇</h1><div class="meta"><span><i class="fa fa-user-o"></i> Yurchiu </span><span><i class="fa fa-clock-o"></i> 2021-07-28, 15:16:09</span> <span><i class="fa fa-font"></i> 1.8k</span> <span class="hideBars" onclick="hideBars()"><i class="fa fa-eye-slash"></i> 隐藏左右两栏 </span><span class="showBars" onclick="showBars()"><i class="fa fa-eye"></i> 展示左右两栏</span></div></div><div class="breadcrumb"><div class="url"><a href="/"><i class="fa fa-home"></i> 首页</a> / P7078 [CSP-S2020] 贪吃蛇</div><div class="share">分享到 <a target="_blank" rel="noopener" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://yz-hs.github.io/b1c1608155d2/&title=P7078 [CSP-S2020] 贪吃蛇&site=https://yz-hs.github.io"><i class="fa fa-qq"></i></a></div></div><div class="post-text"><p>这里，先放一个我做的 PPT：<a href="/media/%E8%B4%AA%E5%90%83%E8%9B%87%5BCSP-S2020%5D-%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A.pps">link</a>。如果有补充，放在下面。</p><span id="more"></span><h1 id="完整代码"><a class="markdownIt-Anchor" href="#完整代码"></a> 完整代码</h1><pre class="highlight"><code class="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-keyword">namespace</span> _yz
&#123;
	<span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;
	<span class="hljs-type">const</span> ll N=<span class="hljs-number">1000000</span>+<span class="hljs-number">10</span>;
	<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Snakes</span><span class="hljs-comment">//使用运算符重载，可以方便地进行“蛇”运算。 </span>
	&#123;			 <span class="hljs-comment">//有题解使用 pair。这种东西是将两个数据合并到一块，两者数据类型不必相同。</span>
		ll id,hp;<span class="hljs-comment">//蛇的体力，编号。 </span>
		<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&gt;(Snakes b)<span class="hljs-comment">//定义蛇的大小。 </span>
		&#123;
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;hp==b.hp) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;id&gt;b.id;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;hp&gt;b.hp;<span class="hljs-comment">//this 是一个结构体指针，指向左值的地址。访问结构体成员的值使用 -&gt; 运算符。 </span>
		&#125;
		<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(Snakes b)
		&#123;
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;hp==b.hp) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;id&lt;b.id;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;hp&lt;b.hp;
		&#125;
		Snakes <span class="hljs-keyword">operator</span>-(Snakes b)<span class="hljs-comment">//定义蛇的“吃”运算。 </span>
		&#123;
			Snakes <span class="hljs-type">_t</span>=*<span class="hljs-keyword">this</span>;<span class="hljs-comment">//!!! 40-&gt;100 qwq</span>
			<span class="hljs-type">_t</span>.hp=<span class="hljs-keyword">this</span>-&gt;hp-b.hp;
			<span class="hljs-keyword">return</span> <span class="hljs-type">_t</span>;
		&#125;
	&#125;s[N];
	ll n,ans=<span class="hljs-number">0</span>;
	deque&lt;Snakes&gt;q1,q2;<span class="hljs-comment">//q1 是初始队列，q2 是吃了之后的队列（单调不升） </span>
	<span class="hljs-comment">/*  deque 的用法
	q.front() 返回队首元素。
	q.back() 返回队尾元素。
	q.pop_front() 返回队首元素。
	q.pop_back() 返回队尾元素。
	q.push_front(x) 从队首压入元素 x。
	q.push_back(x) 从队尾压入元素 x。 
	q.size() 返回队列大小。
	q.clear() 清空队列。 
	*/</span>
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span>
	</span>&#123;
		q1.<span class="hljs-built_in">clear</span>();q2.<span class="hljs-built_in">clear</span>();
		<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=n;i++)
			q1.<span class="hljs-built_in">push_front</span>(s[i]);
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">getF</span><span class="hljs-params">()</span><span class="hljs-comment">//取最大。 </span>
	</span>&#123;
		Snakes S;
		<span class="hljs-keyword">if</span>(q2.<span class="hljs-built_in">empty</span>() ||<span class="hljs-comment">//最开始，q2 为空，此时 q1 一定不为空。所以只能选择 q1. </span>
		   (!q1.<span class="hljs-built_in">empty</span>()&amp;&amp;<span class="hljs-comment">//首先保证 q1 不为空。 </span>
		   q1.<span class="hljs-built_in">front</span>()&gt;q2.<span class="hljs-built_in">front</span>()))<span class="hljs-comment">//再保证 q1 比 q2 大。 </span>
		     S=q1.<span class="hljs-built_in">front</span>(),q1.<span class="hljs-built_in">pop_front</span>();
		<span class="hljs-keyword">else</span> S=q2.<span class="hljs-built_in">front</span>(),q2.<span class="hljs-built_in">pop_front</span>();<span class="hljs-comment">//否则是 q2。 </span>
		<span class="hljs-keyword">return</span> S;
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">getB</span><span class="hljs-params">()</span><span class="hljs-comment">//取 q1 最小。 </span>
	</span>&#123;
		Snakes S=q1.<span class="hljs-built_in">back</span>();
		q1.<span class="hljs-built_in">pop_back</span>();
		<span class="hljs-keyword">return</span> S;
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">Check</span><span class="hljs-params">()</span><span class="hljs-comment">//检查是否为最弱蛇。 </span>
	</span>&#123;
		Snakes S;
		<span class="hljs-keyword">if</span>(!q1.<span class="hljs-built_in">empty</span>()) S=q1.<span class="hljs-built_in">back</span>();
		<span class="hljs-keyword">if</span>(!q2.<span class="hljs-built_in">empty</span>()&amp;&amp;S&gt;q2.<span class="hljs-built_in">back</span>()) S=q2.<span class="hljs-built_in">back</span>();
		<span class="hljs-keyword">return</span> S; 
	&#125;
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span>
	</span>&#123;
		<span class="hljs-comment">/*  思路： 
		将整场决斗分为两个阶段。
		 
		有一个显然的结论：当前最强的蛇如果吃了最弱的蛇之后，没有变成最弱的蛇，它一定会选择吃。
		引理 1：如果蛇们按照规则一直吃，则吃完后的蛇是越来越弱的。
			    即，若 a_i 比 a_j 先吃，则 a_i &gt; a_j。
		证明 引理 1：最强蛇一定不如以前强，最弱蛇一定不如以前弱。 
		证明 显然的结论：它如果吃了，仍最强，不吃白不吃；
						 它如果吃了，不是最强的，则根据引理 1，之后的蛇吃后，一定比它要弱，一定会想尽办法不死。
						 因此不管如何，它一定死不了。
		把 当前最强的蛇吃了最弱的蛇之后没有变成最弱的蛇 这个阶段，定为第一阶段。 
		
		然而，可能当前最强的蛇吃了最弱的蛇之后，变成了最弱的蛇！这时候，它吃不吃，取决于后面的蛇是否吃。
		推理一下： 
		- 如果 a_i 吃了，变成最弱蛇，而 a_j 再吃 a_i 后不是最弱蛇，则 a_j 一定吃，那 a_i 就死了，所以 a_i 不能吃。
		- 如果 a_i 吃了，变成最弱蛇，而 a_j 再吃 a_i 后是最弱蛇，而 a_k 吃了 a_j 不是最弱蛇，则 a_k 一定吃，
		  那 a_j 就死了，所以 a_j 不能吃。所以 a_i 能吃。
		- 吃吃吃，如果最后场上只有两条蛇，则 a_i 无论如何都要吃。
		把 当前最强的蛇吃了最弱的蛇之后都变成最弱的蛇 这个阶段，定为第二阶段。 
		所以这个问题就变成了一个递归的问题，边界是一条蛇打破了第二阶段或场上只有两条蛇了。
		实际上，在程序设计时，不用写递归，因为注意到 a_i 能不能吃和递归层数的奇偶性有关。所以只需一个 while 即可解决。 
		*/</span>
		
		<span class="hljs-comment">/*  程序设计：
		定义双端队列 q1，q2。我们根据引理 1 找到了单调性，所以不用带 log 的数据结构维护。 
		第一阶段： 
			设 G 要吃 L，变成 T。之后把 T 压入 q2 尾部。 
		    q2 队列中的蛇在第一阶段一定不会被吃（如果被吃，则说明上一个 G 变成了最弱蛇，进入第二阶段）。
		第二阶段：
			只需维护一个最弱蛇，不用再压入队列，因为第二阶段结束后整个决斗就停止了。并统计吃的次数。 
			这个阶段用来看能不能再吃一次。 
		*/</span>
		<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)
		&#123;
			ll cnt=<span class="hljs-number">0</span>;<span class="hljs-comment">//吃的次数 </span>
			<span class="hljs-keyword">if</span>(q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()&lt;=<span class="hljs-number">2</span>) &#123;ans=<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>;&#125;
			Snakes L=<span class="hljs-built_in">getB</span>(),G=<span class="hljs-built_in">getF</span>();
			Snakes T=(G-L);
			<span class="hljs-keyword">if</span>(T&lt;q1.<span class="hljs-built_in">back</span>() || q1.<span class="hljs-built_in">empty</span>())<span class="hljs-comment">//T == L</span>
			&#123;
				ans=q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()+<span class="hljs-number">2</span>;<span class="hljs-comment">//答案不必动态统计。 </span>
				<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)
				&#123;
					cnt++;
					<span class="hljs-keyword">if</span>(q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()+<span class="hljs-number">1</span>&lt;=<span class="hljs-number">2</span>)&#123;ans-=(cnt%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>);<span class="hljs-comment">/*奇偶性*/</span><span class="hljs-keyword">return</span>;&#125;
					G=<span class="hljs-built_in">getF</span>();T=(G-T);
					<span class="hljs-keyword">if</span>(T&gt;<span class="hljs-built_in">Check</span>())&#123;ans-=(cnt%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span>;&#125;
				&#125;
			&#125;<span class="hljs-keyword">else</span> q2.<span class="hljs-built_in">push_back</span>(T);
		&#125;
	&#125;
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">yzmain</span><span class="hljs-params">()</span>
	</span>&#123;
		ll T,t1,t2,k;
		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;T);
		<span class="hljs-keyword">for</span>(ll qwq=<span class="hljs-number">1</span>;qwq&lt;=T;qwq++)
		&#123;
			<span class="hljs-keyword">if</span>(qwq==<span class="hljs-number">1</span>)
			&#123;
				<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;n);
				<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=n;i++)
				&#123;
					<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;s[i].hp);
					s[i].id=i;
				&#125;
			&#125;
			<span class="hljs-keyword">else</span>
			&#123;
				<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;k);
				<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=k;i++)
				&#123;
					<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>,&amp;t1,&amp;t2);
					s[t1].hp=t2;
				&#125;
			&#125;
			<span class="hljs-built_in">init</span>();
			<span class="hljs-built_in">solve</span>();
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);
		&#125;
		<span class="hljs-keyword">return</span>;
	&#125;
&#125;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>&#123;
	<span class="hljs-comment">//freopen(&quot;snakes.in&quot;,&quot;r&quot;,stdin);</span>
	<span class="hljs-comment">//freopen(&quot;out.txt&quot;,&quot;w&quot;,stdout);</span>
	_yz::<span class="hljs-built_in">yzmain</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&#125;
</code></pre><h1 id="无注释版"><a class="markdownIt-Anchor" href="#无注释版"></a> 无注释版</h1><pre class="highlight"><code class="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-keyword">namespace</span> _yz
&#123;
	<span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;
	<span class="hljs-type">const</span> ll N=<span class="hljs-number">1000000</span>+<span class="hljs-number">10</span>;
	<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Snakes</span>
	&#123;
		ll id,hp;
		<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&gt;(Snakes b)
		&#123;
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;hp==b.hp) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;id&gt;b.id;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;hp&gt;b.hp;
		&#125;
		<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(Snakes b)
		&#123;
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;hp==b.hp) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;id&lt;b.id;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;hp&lt;b.hp;
		&#125;
		Snakes <span class="hljs-keyword">operator</span>-(Snakes b)
		&#123;
			Snakes <span class="hljs-type">_t</span>=*<span class="hljs-keyword">this</span>;
			<span class="hljs-type">_t</span>.hp=<span class="hljs-keyword">this</span>-&gt;hp-b.hp;
			<span class="hljs-keyword">return</span> <span class="hljs-type">_t</span>;
		&#125;
	&#125;s[N];
	ll n,ans=<span class="hljs-number">0</span>;
	deque&lt;Snakes&gt;q1,q2;
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span>
	</span>&#123;
		q1.<span class="hljs-built_in">clear</span>();q2.<span class="hljs-built_in">clear</span>();
		<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=n;i++)
			q1.<span class="hljs-built_in">push_front</span>(s[i]);
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">getF</span><span class="hljs-params">()</span> 
	</span>&#123;
		Snakes S;
		<span class="hljs-keyword">if</span>(q2.<span class="hljs-built_in">empty</span>() || (!q1.<span class="hljs-built_in">empty</span>()&amp;&amp;q1.<span class="hljs-built_in">front</span>()&gt;q2.<span class="hljs-built_in">front</span>()))
		     S=q1.<span class="hljs-built_in">front</span>(),q1.<span class="hljs-built_in">pop_front</span>();
		<span class="hljs-keyword">else</span> S=q2.<span class="hljs-built_in">front</span>(),q2.<span class="hljs-built_in">pop_front</span>(); 
		<span class="hljs-keyword">return</span> S;
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">getB</span><span class="hljs-params">()</span>
	</span>&#123;
		Snakes S=q1.<span class="hljs-built_in">back</span>();
		q1.<span class="hljs-built_in">pop_back</span>();
		<span class="hljs-keyword">return</span> S;
	&#125;
	<span class="hljs-function">Snakes <span class="hljs-title">Check</span><span class="hljs-params">()</span>
	</span>&#123;
		Snakes S;
		<span class="hljs-keyword">if</span>(!q1.<span class="hljs-built_in">empty</span>()) S=q1.<span class="hljs-built_in">back</span>();
		<span class="hljs-keyword">if</span>(!q2.<span class="hljs-built_in">empty</span>()&amp;&amp;S&gt;q2.<span class="hljs-built_in">back</span>()) S=q2.<span class="hljs-built_in">back</span>();
		<span class="hljs-keyword">return</span> S; 
	&#125;
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span>
	</span>&#123;
		<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)
		&#123;
			ll cnt=<span class="hljs-number">0</span>;
			<span class="hljs-keyword">if</span>(q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()&lt;=<span class="hljs-number">2</span>) &#123;ans=<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>;&#125;
			Snakes L=<span class="hljs-built_in">getB</span>(),G=<span class="hljs-built_in">getF</span>();
			Snakes T=(G-L);
			<span class="hljs-keyword">if</span>(T&lt;q1.<span class="hljs-built_in">back</span>() || q1.<span class="hljs-built_in">empty</span>())
			&#123;
				ans=q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()+<span class="hljs-number">2</span>; 
				<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)
				&#123;
					cnt++;
					<span class="hljs-keyword">if</span>(q1.<span class="hljs-built_in">size</span>()+q2.<span class="hljs-built_in">size</span>()+<span class="hljs-number">1</span>&lt;=<span class="hljs-number">2</span>)&#123;ans-=(cnt%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span>;&#125;
					G=<span class="hljs-built_in">getF</span>();T=(G-T);
					<span class="hljs-keyword">if</span>(T&gt;<span class="hljs-built_in">Check</span>())&#123;ans-=(cnt%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span>;&#125;
				&#125;
			&#125;<span class="hljs-keyword">else</span> q2.<span class="hljs-built_in">push_back</span>(T);
		&#125;
	&#125;
	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">yzmain</span><span class="hljs-params">()</span>
	</span>&#123;
		ll T,t1,t2,k;
		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;T);
		<span class="hljs-keyword">for</span>(ll qwq=<span class="hljs-number">1</span>;qwq&lt;=T;qwq++)
		&#123;
			<span class="hljs-keyword">if</span>(qwq==<span class="hljs-number">1</span>)
			&#123;
				<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;n);
				<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=n;i++)
				&#123;
					<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;s[i].hp);
					s[i].id=i;
				&#125;
			&#125;
			<span class="hljs-keyword">else</span>
			&#123;
				<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;k);
				<span class="hljs-keyword">for</span>(ll i=<span class="hljs-number">1</span>;i&lt;=k;i++)
				&#123;
					<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>,&amp;t1,&amp;t2);
					s[t1].hp=t2;
				&#125;
			&#125;
			<span class="hljs-built_in">init</span>();
			<span class="hljs-built_in">solve</span>();
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);
		&#125;
		<span class="hljs-keyword">return</span>;
	&#125;
&#125;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>&#123;
	_yz::<span class="hljs-built_in">yzmain</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&#125;
</code></pre><br><hr><img src="/img/end-heart.gif" style="box-shadow:none"><br><blockquote><br>本文作者：Yurchiu<br><br>本文链接：https://yz-hs.github.io/b1c1608155d2/<br><br>版权声明：本博客中所有原创文章除特别声明外，均允许规范转载，转载请注明出处。所有非原创文章，按照原作者要求转载。<br><br></blockquote><br><div class="end-post-meta"><span><a href="/tags/OI"><i class="fa fa-tag"></i> OI</a></span> <span><a href="/tags/博弈论"><i class="fa fa-tag"></i> 博弈论</a></span> <span><a href="/tags/模拟"><i class="fa fa-tag"></i> 模拟</a></span> <span><a href="/tags/毒瘤题"><i class="fa fa-tag"></i> 毒瘤题</a></span> <span><a href="/tags/队列"><i class="fa fa-tag"></i> 队列</a></span></div><div class="end-post-meta"><span><i class="fa fa-refresh"></i> 最后更新：2023-08-14, 17:48:47</span></div></div><div class="prevnext"><a class="prev" href="/1a06ceae98f4/">上一页</a> <a class="next" href="/f2963a0c0e8d/">下一页</a></div><div class="comments"><div id="gitalk-container"></div><script>var gitalk=new Gitalk({clientID:"1c64f04731dad7dcc928",clientSecret:"576bde3af3744ef3d054d3b293d0a0c1fce5087f",repo:"no-code",owner:"yz-hs",admin:["yz-hs"],id:location.pathname,language:"zh-CN",proxy:"https://o.cieu.tk/https://github.com/login/oauth/access_token",distractionFreeMode:!1});gitalk.render("gitalk-container")</script></div><div class="avatar-container" style="padding:50px"><img src="/img/new-avatar.jpg" class="avatar revolve" style="height:12%;width:12%"><div style="text-align:center;margin-top:3%">By Yurchiu.</div></div></div><div class="vertical toolbar"><div class="tab-page"><div class="tabTitle tb-tabTitle"><ul><li class="current"><i class="fa fa-random"></i></li><li><i class="fa fa-refresh"></i></li><li><i class="fa fa-circle-o-notch"></i></li></ul></div><div class="tabContent tb-tabContent"><div><div class="title">随机文章<span class="sidetitle">回味旧文</span></div><div class="item no-lrpadding"><a class="post-link" href="/3513c6ef3e31/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">2021，初中毕业</div></div></a><a class="post-link" href="/d24d99489782/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">2020 新年贺词</div></div></a><a class="post-link" href="/ed885af1fef5/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">ASCII 艺术</div></div></a><a class="post-link" href="/1ed002c31ce3/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">CSP-J1 游记</div></div></a><a class="post-link" href="/2ab979d324b5/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">BSGS 与 exBSGS</div></div></a><a class="post-link" href="/501647d25831/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">AFO 有感</div></div></a><a class="post-link" href="/3f5d366e12dd/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">一个 4 人囚徒困境的必胜策略</div></div></a></div></div><div class="hide"><div class="title">最近更新<span class="sidetitle">旧文更新</span></div><div class="item no-lrpadding"><a class="post-link" href="/0e3f9acc1e28/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">【解析几何】齐次化联立</div></div></a><a class="post-link" href="/6c70d3b4b7b8/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">PicGo 使用</div></div></a><a class="post-link" href="/0d102f9a3ef1/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">OI 之旅</div></div></a><a class="post-link" href="/501647d25831/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">AFO 有感</div></div></a><a class="post-link" href="/f4829e127292/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">小技巧和一些代码</div></div></a><a class="post-link" href="/51eaeba01a9b/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">[Works] Shelter(adapted)</div></div></a><a class="post-link" href="/39e4c172e542/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">Cutie 使用文档</div></div></a></div></div><div class="hide"><div class="title">其他物件<a data-bs-toggle="tooltip" href="javascript: document.body.contentEditable='true';
    document.designMode='on';void(0);" title="彩蛋：点击我，可以编辑本页面！" target="_self" class="sidetitle">杂物收纳</a></div><div style="height:10px"></div><div class="item"><tag style="display:inline-block">Hitokoto</tag><br><br><div id="hitokoto">Yurchiu 说，除了她以外的人都很强！嘤嘤嘤~~</div><script>fetch("https://v1.hitokoto.cn").then(function(t){return t.json()}).then(function(t){$("#hitokoto").html(t.hitokoto+"<br><br><div style='text-align: right;'>——"+t.from+"</div>")}).catch(function(t){console.error(t)})</script></div><div class="item"><div id="timeprogress"></div><script>var myDate=new Date,hours=myDate.getHours(),minutes=myDate.getMinutes(),pro=(minutes=60*hours+minutes)/14.4,innerhtml="        <div class='progress' style='height: 20px'>          <div data-bs-toggle='tooltip'               class='progress-bar'               title='时间已过去了 "+pro.toFixed(2)+"%'               style='width: "+pro+"%;               background-color: #4caf50; color: #fff;'>"+pro.toFixed(0)+"%          </div>        </div>";document.getElementById("timeprogress").innerHTML=innerhtml</script></div></div></div></div><div class="item"><div class="title">博客信息</div><div class="list-group"><div class="list-group-item"><div><i class="fa fa-file-text-o fa-fw"></i> 文章数目</div><div class="badge">157</div></div><div class="list-group-item"><div><i class="fa fa-refresh fa-fw"></i> 最近更新</div><div class="badge">08-14</div></div><div class="list-group-item"><div><i class="fa fa-font fa-fw"></i> 本站字数</div><div class="badge">357.5k</div></div></div></div><div class="post-toc"><div class="title">文章目录</div><div class="post-toc-inner"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-text">完整代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A0%E6%B3%A8%E9%87%8A%E7%89%88"><span class="toc-text">无注释版</span></a></li></ol></div></div><script>$(function(){var i=$(".tb-tabTitle>ul>li"),n=$(".tb-tabContent>div");i.click(function(){var t=$(this);setTimeout(function(){t.addClass("current").siblings().removeClass("current");var i=t.index();n.eq(i).show().siblings().hide()})})})</script></div></div><div class="footer"><p class="text-left">©2019-2023 <a target="_blank" rel="noopener" href="https://github.com/yz-hs">Yurchiu</a>. All rights reserved.</p><p class="text-right">Theme <a target="_blank" rel="noopener" href="https://github.com/yz-hs/cutie">Cutie</a>, by Yurchiu.</p></div><div class="natsuki-container" style="width:140px" data-bs-toggle="tooltip" title="Don't touch me! qwq"><img id="natsuki2" width="100%" height="100%" src="/img/natsuki2.png"> <img id="natsuki1" width="100%" height="100%" src="/img/natsuki1.png"></div><script type="text/javascript">$("#natsuki1").click(function(){$("#natsuki1").hide(),$("#natsuki2").show(),$("#natsuki2").css("animation","natsuki 0.55s cubic-bezier(0, 0, 0, 1)")}),$("#natsuki2").each(function(){$(this)[0].addEventListener("animationend",function(){$("#natsuki2").hide(),$("#natsuki1").show(),$(this).css("animation","")})})</script><script>readData("special")||$("html").addClass("none")</script><script>readData("color")||$("html").addClass("color-white"),$("img").attr("onerror","this.src='/img/error.jpg';this.onerror=null"),initialization()</script></div><meting-js class="meting-js appear" fixed="ture" server="netease" type="playlist" id="8524070964"></meting-js><script>consolePrint(),HideIt()</script><script src="/js/ctitle.js"></script><script src="/js/clicklove.js"></script></body></html>