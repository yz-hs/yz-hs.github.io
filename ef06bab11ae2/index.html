<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="msvalidate.01" content="A7B4DB5A7BF5E5C6E52E34BB024D6319"><meta name="description" content="本站为 Yurchiu 用来记录 OI、笔记、感想的 Blog，欢迎来到本博客！希望我们能相互交流，共同进步～"><meta http-equiv="content-language" content="zh-cn"><title>Gitalk Network Error 解决 | Yurchiu's Blog</title><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.min.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.4.17/sweetalert2.all.min.js"></script><script src="https://cdn.staticfile.org/sketch.js/1.0/sketch.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script><script src="/js/chaffle.js"></script><script src="/js/main.js"></script><script src="/js/search.js"></script><script src="/js/initial.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.6/katex.min.css"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/vs2015.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css"><link rel="stylesheet" href="/css/style.css"><link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Yurchiu's Blog" type="application/atom+xml"></head><body style="background-image:url(/img/new-bgp.png)"><div id="YurLoading" class="YurLoading"><div class="inner"><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div></div></div><div class="topbar"><a onclick="topbarToggle()" class="topbar-menu" style="cursor:pointer"><i class="fa fa-bars"></i> </a><a href="/" class="topbar-title"><i class="fa fa-home"></i> Yurchiu's Blog </a><a target="_blank" rel="noopener" href="https://github.com/yz-hs" class="topbar-title"><i class="fa fa-github"></i></a></div><div id="article-container"><div class="sidebar"><div class="avatar-container"><img src="/img/new-avatar.jpg" class="avatar revolve"></div><div class="sidebar-author">Yurchiu<br><span class="mini-text">An AFO whker.</span></div><div class="sidebar-list-container"><div style="height:10px"></div><a class="list-group-item" href="/"><div><i class="fa fa-home fa-fw"></i>&nbsp; 首页</div><div class="badge"></div></a><a class="list-group-item" href="/archives/"><div><i class="fa fa-tasks fa-fw"></i>&nbsp; 归档</div><div class="badge">160</div></a><a class="list-group-item" href="/tags/"><div><i class="fa fa-tags fa-fw"></i>&nbsp; 标签</div><div class="badge">81</div></a><a class="list-group-item" href="/categories/"><div><i class="fa fa-th-large fa-fw"></i>&nbsp; 分类</div><div class="badge">24</div></a><a class="list-group-item" href="/somepage/mood/"><div><i class="fa fa-photo fa-fw"></i>&nbsp; 说说</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/about/"><div><i class="fa fa-user-o fa-fw"></i>&nbsp; 关于</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/chat/"><div><i class="fa fa-commenting-o fa-fw"></i>&nbsp; 留言</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/link/"><div><i class="fa fa-link fa-fw"></i>&nbsp; 链接</div><div class="badge"></div></a><a class="list-group-item" href="/somepage/settings/"><div><i class="fa fa-cog fa-fw"></i>&nbsp; 设置</div><div class="badge"></div></a><div style="height:200px"></div></div><div class="sidebar-footer"><div class="item" id="back2Top" data-bs-toggle="tooltip" title="顶部"><i class="fa fa-arrow-circle-up"></i></div><div class="item" id="back2Down" data-bs-toggle="tooltip" title="底部"><i class="fa fa-arrow-circle-down"></i></div><div class="item" data-bs-toggle="tooltip" title="RSS"><a href="/atom.xml"><i class="fa fa-feed"></i></a></div><div class="item" data-bs-toggle="tooltip" title="搜索"><a href="/somepage/search/"><i class="fa fa-search"></i></a></div></div></div><div class="article"><div class="vertical fake-sidebar"></div><div class="vertical post"><div class="header"><h1 class="title">Gitalk Network Error 解决</h1><div class="meta"><span><i class="fa fa-user-o"></i> Yurchiu,Internet </span><span><i class="fa fa-clock-o"></i> 2022-12-31, 20:50:39</span> <span><i class="fa fa-font"></i> 1.9k</span> <span class="hideBars" onclick="hideBars()"><i class="fa fa-eye-slash"></i> 隐藏左右两栏 </span><span class="showBars" onclick="showBars()"><i class="fa fa-eye"></i> 展示左右两栏</span></div></div><div class="breadcrumb"><div class="url"><a href="/"><i class="fa fa-home"></i> 首页</a> / Gitalk Network Error 解决</div><div class="share">分享到 <a target="_blank" rel="noopener" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://yz-hs.github.io/ef06bab11ae2/&title=Gitalk Network Error 解决&site=https://yz-hs.github.io"><i class="fa fa-qq"></i></a></div></div><div class="post-text"><p>我们都知道，Gitalk 现在必 Network Error。这篇文章详细描述如何解决问题。本文由 Yurchiu 从网上多篇文章集合而来。</p><p>打开个人博客页面，F12 看控制台，发现 <a target="_blank" rel="noopener" href="https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token">https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token</a> 这个连接访问失败，这个就是 Github 获取 accesstoken 的代理链接，<a target="_blank" rel="noopener" href="https://cors-anywhere.azm.workers.dev/">https://cors-anywhere.azm.workers.dev/</a> 被墙了，导致代理失效。</p><p>如何解决这个问题呢？本解决方案无任何花费，无需服务器等。</p><h1 id="1-申请一个域名"><a class="markdownIt-Anchor" href="#1-申请一个域名"></a> 1. 申请一个域名</h1><p>可以使用 Freenom 免费域名。但是它有很多坑。</p><p><a href="/41baa17cf2cf/">如何避坑</a>。</p><h1 id="2-cloudflare-域名托管"><a class="markdownIt-Anchor" href="#2-cloudflare-域名托管"></a> 2. Cloudflare 域名托管</h1><p>进入 <a target="_blank" rel="noopener" href="https://dash.cloudflare.com/">Cloudflare Dashboard</a>，添加站点，选择 Free 免费套餐。域名解析记录类型选 A 记录即可，然后填入域名前缀（随便）、服务器 IP 地址（随便），选择 CDN 状态（使云朵为黄色），输入完毕后添加记录。</p><p>添加成功后会显示在下面，点击 Continue 继续。按说明修改自己的域名服务器为 Cloudflare 给出的地址。</p><h1 id="3-worker"><a class="markdownIt-Anchor" href="#3-worker"></a> 3. Worker</h1><p>利用 CloudFlare Worker 创建在线代理。创建一个 Worker，部署一个 JS 脚本。</p><details><summary>查看 JS 代码</summary><pre class="highlight"><code class="javascript"><span class="hljs-keyword">const</span> exclude = [];     <span class="hljs-comment">// Regexp for blacklisted urls</span>
<span class="hljs-keyword">const</span> include = [<span class="hljs-regexp">/^https?:\/\/.*yz-hs\.github\.io$/</span>, <span class="hljs-regexp">/^https?:\/\/localhost/</span>]; <span class="hljs-comment">// Regexp for whitelisted origins e.g.</span>
<span class="hljs-keyword">const</span> apiKeys = &#123;
	<span class="hljs-title class_">EZWTLwVEqFnaycMzdhBz</span>: &#123;
		<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Test App&#x27;</span>,
		<span class="hljs-attr">expired</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">expiresAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">&#x27;2023-01-01&#x27;</span>),
		<span class="hljs-attr">exclude</span>: [], <span class="hljs-comment">// Regexp for blacklisted urls</span>
		<span class="hljs-attr">include</span>: [<span class="hljs-string">&quot;^http.?://yz-hs.github.io$&quot;</span>, <span class="hljs-string">&quot;yz-hs.github.io$&quot;</span>, <span class="hljs-string">&quot;^https?://localhost/&quot;</span>], <span class="hljs-comment">// Regexp for whitelisted origins</span>
	&#125;,
&#125;;

<span class="hljs-comment">// Config is all above this line.</span>
<span class="hljs-comment">// It should not be necessary to change anything below.</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyCredentials</span>(<span class="hljs-params">request</span>) &#123;
	<span class="hljs-comment">// Throws exception on verification failure.</span>
	<span class="hljs-keyword">const</span> requestApiKey = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-cors-proxy-api-key&#x27;</span>);
	<span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(apiKeys).<span class="hljs-title function_">includes</span>(requestApiKey)) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">&#x27;Invalid authorization key.&#x27;</span>);
	&#125;

	<span class="hljs-keyword">if</span> (apiKeys[requestApiKey].<span class="hljs-property">expired</span>) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">&#x27;Expired authorization key.&#x27;</span>);
	&#125;

	<span class="hljs-keyword">if</span> (apiKeys[requestApiKey].<span class="hljs-property">expiresAt</span> &amp;&amp; apiKeys[requestApiKey].<span class="hljs-property">expiresAt</span>.<span class="hljs-title function_">getTime</span>() &lt; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">`Expired authorization key.\nKey was valid until: <span class="hljs-subst">$&#123;apiKeys[requestApiKey].expiresAt&#125;</span>`</span>);
	&#125;

	<span class="hljs-keyword">return</span> apiKeys[requestApiKey];
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkRequiredHeadersPresent</span>(<span class="hljs-params">request</span>) &#123;
	<span class="hljs-comment">// Throws exception on verification failure.</span>
	<span class="hljs-keyword">if</span> (!request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Origin&#x27;</span>) &amp;&amp; !request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-requested-with&#x27;</span>)) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Missing required request header. Must specify one of: origin,x-requested-with&#x27;</span>);
	&#125;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UnauthorizedException</span>(<span class="hljs-params">reason</span>) &#123;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-number">401</span>;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">statusText</span> = <span class="hljs-string">&#x27;Unauthorized&#x27;</span>;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">BadRequestException</span>(<span class="hljs-params">reason</span>) &#123;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-number">400</span>;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">statusText</span> = <span class="hljs-string">&#x27;Bad Request&#x27;</span>;
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isListed</span>(<span class="hljs-params">uri, listing</span>) &#123;
	<span class="hljs-keyword">let</span> returnValue = <span class="hljs-literal">false</span>;
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(uri);
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> uri === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> m <span class="hljs-keyword">of</span> listing) &#123;
			<span class="hljs-keyword">if</span> (uri.<span class="hljs-title function_">match</span>(m) !== <span class="hljs-literal">null</span>) &#123;
				returnValue = <span class="hljs-literal">true</span>;
			&#125;
		&#125;
	&#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//   Decide what to do when Origin is null</span>
		returnValue = <span class="hljs-literal">true</span>; <span class="hljs-comment">// True accepts null origins false rejects them.</span>
	&#125;

	<span class="hljs-keyword">return</span> returnValue;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">fix</span>(<span class="hljs-params">myHeaders, request, isOPTIONS</span>) &#123;
	myHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>, request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Origin&#x27;</span>));
	<span class="hljs-keyword">if</span> (isOPTIONS) &#123;
		myHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Methods&#x27;</span>, request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;access-control-request-method&#x27;</span>));
		<span class="hljs-keyword">const</span> acrh = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;access-control-request-headers&#x27;</span>);

		<span class="hljs-keyword">if</span> (acrh) &#123;
			myHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Headers&#x27;</span>, acrh);
		&#125;

		myHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;X-Content-Type-Options&#x27;</span>);
	&#125;

	<span class="hljs-keyword">return</span> myHeaders;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">parseURL</span>(<span class="hljs-params">requestUrl</span>) &#123;
	<span class="hljs-keyword">const</span> match = requestUrl.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(?:(https?:)?\/\/)?(([^/?]+?)(?::(\d&#123;0,5&#125;)(?=[/?]|$))?)([/?][\S\s]*|$)/i</span>);
	<span class="hljs-comment">//                              ^^^^^^^          ^^^^^^^^      ^^^^^^^                ^^^^^^^^^^^^</span>
	<span class="hljs-comment">//                            1:protocol       3:hostname     4:port                 5:path + query string</span>
	<span class="hljs-comment">//                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
	<span class="hljs-comment">//                                            2:host</span>

	<span class="hljs-keyword">if</span> (!match) &#123;
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;no match&#x27;</span>);
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Invalid URL for proxy request.&#x27;</span>);
	&#125;

	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;parseURL:match:&#x27;</span>, match);

	<span class="hljs-keyword">if</span> (!match[<span class="hljs-number">1</span>]) &#123;
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;nothing in match group 1&#x27;</span>);
		<span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^https?:/i</span>.<span class="hljs-title function_">test</span>(requestUrl)) &#123;
			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;The pattern at top could mistakenly parse &quot;http:///&quot; as host=&quot;http:&quot; and path=///.&#x27;</span>);
			<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Invalid URL for proxy request.&#x27;</span>);
		&#125;

		<span class="hljs-comment">// Scheme is omitted.</span>
		<span class="hljs-keyword">if</span> (requestUrl.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">&#x27;//&#x27;</span>, <span class="hljs-number">0</span>) === -<span class="hljs-number">1</span>) &#123;
			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;&quot;//&quot; is omitted&#x27;</span>);
			requestUrl = <span class="hljs-string">&#x27;//&#x27;</span> + requestUrl;
		&#125;

		requestUrl = (match[<span class="hljs-number">4</span>] === <span class="hljs-string">&#x27;443&#x27;</span> ? <span class="hljs-string">&#x27;https:&#x27;</span> : <span class="hljs-string">&#x27;http:&#x27;</span>) + requestUrl;
	&#125;

	<span class="hljs-keyword">const</span> parsed = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(requestUrl);
	<span class="hljs-keyword">if</span> (!parsed.<span class="hljs-property">hostname</span>) &#123;
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;&quot;http://:1/&quot; and &quot;http:/notenoughslashes&quot; could end up here.&#x27;</span>);
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Invalid URL for proxy request.&#x27;</span>);
	&#125;

	<span class="hljs-keyword">return</span> parsed;
&#125;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxyRequest</span>(<span class="hljs-params">request, activeApiKey</span>) &#123;
	<span class="hljs-keyword">const</span> isOPTIONS = (request.<span class="hljs-property">method</span> === <span class="hljs-string">&#x27;OPTIONS&#x27;</span>);
	<span class="hljs-keyword">const</span> originUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);
	<span class="hljs-keyword">const</span> origin = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Origin&#x27;</span>);
	<span class="hljs-comment">// ParseURL throws when the url is invalid</span>
	<span class="hljs-keyword">const</span> fetchUrl = <span class="hljs-title function_">parseURL</span>(request.<span class="hljs-property">url</span>.<span class="hljs-title function_">replace</span>(originUrl.<span class="hljs-property">origin</span>, <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>));

	<span class="hljs-comment">// Throws if it fails the check</span>
	<span class="hljs-title function_">checkRequiredHeadersPresent</span>(request);

	<span class="hljs-comment">// Excluding urls which are not allowed as destination urls</span>
	<span class="hljs-comment">// Exclude origins which are not int he included ones</span>
	<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isListed</span>(fetchUrl.<span class="hljs-title function_">toString</span>(), [...exclude, ...(activeApiKey?.<span class="hljs-property">exclude</span> || [])]) || !<span class="hljs-title function_">isListed</span>(origin, [...include, ...(activeApiKey?.<span class="hljs-property">include</span> || [])])) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Origin or Destination URL is not allowed.&#x27;</span>);
	&#125;

	<span class="hljs-keyword">let</span> corsHeaders = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-cors-headers&#x27;</span>);

	<span class="hljs-keyword">if</span> (corsHeaders !== <span class="hljs-literal">null</span>) &#123;
		<span class="hljs-keyword">try</span> &#123;
			corsHeaders = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(corsHeaders);
		&#125; <span class="hljs-keyword">catch</span> &#123;&#125;
	&#125;

	<span class="hljs-keyword">if</span> (!originUrl.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;/&#x27;</span>)) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Pathname does not start with &quot;/&quot;&#x27;</span>);
	&#125;

	<span class="hljs-keyword">const</span> recvHpaireaders = &#123;&#125;;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pair <span class="hljs-keyword">of</span> request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>()) &#123;
		<span class="hljs-keyword">if</span> ((pair[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;^origin&#x27;</span>) === <span class="hljs-literal">null</span>)
        &amp;&amp; (pair[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;eferer&#x27;</span>) === <span class="hljs-literal">null</span>)
        &amp;&amp; (pair[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;^cf-&#x27;</span>) === <span class="hljs-literal">null</span>)
        &amp;&amp; (pair[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;^x-forw&#x27;</span>) === <span class="hljs-literal">null</span>)
        &amp;&amp; (pair[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;^x-cors-headers&#x27;</span>) === <span class="hljs-literal">null</span>)
		) &#123;
			recvHpaireaders[pair[<span class="hljs-number">0</span>]] = pair[<span class="hljs-number">1</span>];
		&#125;
	&#125;

	<span class="hljs-keyword">if</span> (corsHeaders !== <span class="hljs-literal">null</span>) &#123;
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(corsHeaders)) &#123;
			recvHpaireaders[c[<span class="hljs-number">0</span>]] = c[<span class="hljs-number">1</span>];
		&#125;
	&#125;

	<span class="hljs-keyword">const</span> newRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(request, &#123;
		<span class="hljs-attr">headers</span>: recvHpaireaders,
	&#125;);

	<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(fetchUrl, newRequest);
	<span class="hljs-keyword">let</span> myHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>(response.<span class="hljs-property">headers</span>);
	<span class="hljs-keyword">const</span> newCorsHeaders = [];
	<span class="hljs-keyword">const</span> allh = &#123;&#125;;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pair <span class="hljs-keyword">of</span> response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>()) &#123;
		newCorsHeaders.<span class="hljs-title function_">push</span>(pair[<span class="hljs-number">0</span>]);
		allh[pair[<span class="hljs-number">0</span>]] = pair[<span class="hljs-number">1</span>];
	&#125;

	newCorsHeaders.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;cors-received-headers&#x27;</span>);
	myHeaders = <span class="hljs-title function_">fix</span>(myHeaders, request, isOPTIONS);

	myHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Access-Control-Expose-Headers&#x27;</span>, newCorsHeaders.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;,&#x27;</span>));

	myHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;cors-received-headers&#x27;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(allh));

	<span class="hljs-keyword">const</span> body = isOPTIONS ? <span class="hljs-literal">null</span> : <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>();

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(body, &#123;
		<span class="hljs-attr">headers</span>: myHeaders,
		<span class="hljs-attr">status</span>: (isOPTIONS ? <span class="hljs-number">200</span> : response.<span class="hljs-property">status</span>),
		<span class="hljs-attr">statusText</span>: (isOPTIONS ? <span class="hljs-string">&#x27;OK&#x27;</span> : response.<span class="hljs-property">statusText</span>),
	&#125;);
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">homeRequest</span>(<span class="hljs-params">request</span>) &#123;
	<span class="hljs-keyword">const</span> isOPTIONS = (request.<span class="hljs-property">method</span> === <span class="hljs-string">&#x27;OPTIONS&#x27;</span>);
	<span class="hljs-keyword">const</span> originUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);
	<span class="hljs-keyword">const</span> origin = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Origin&#x27;</span>);
	<span class="hljs-keyword">const</span> remIp = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;CF-Connecting-IP&#x27;</span>);
	<span class="hljs-keyword">const</span> corsHeaders = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-cors-headers&#x27;</span>);
	<span class="hljs-keyword">let</span> myHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>();
	myHeaders = <span class="hljs-title function_">fix</span>(myHeaders, request, isOPTIONS);

	<span class="hljs-keyword">let</span> country = <span class="hljs-literal">false</span>;
	<span class="hljs-keyword">let</span> colo = <span class="hljs-literal">false</span>;
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> request.<span class="hljs-property">cf</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;
		country = <span class="hljs-keyword">typeof</span> request.<span class="hljs-property">cf</span>.<span class="hljs-property">country</span> === <span class="hljs-string">&#x27;undefined&#x27;</span> ? <span class="hljs-literal">false</span> : request.<span class="hljs-property">cf</span>.<span class="hljs-property">country</span>;
		colo = <span class="hljs-keyword">typeof</span> request.<span class="hljs-property">cf</span>.<span class="hljs-property">colo</span> === <span class="hljs-string">&#x27;undefined&#x27;</span> ? <span class="hljs-literal">false</span> : request.<span class="hljs-property">cf</span>.<span class="hljs-property">colo</span>;
	&#125;

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(
		<span class="hljs-string">&#x27;CLOUDFLARE-CORS-ANYWHERE\n\n&#x27;</span>
        + <span class="hljs-string">&#x27;Source:\nhttps://github.com/chrisspiegl/cloudflare-cors-anywhere\n\n&#x27;</span>
        + <span class="hljs-string">&#x27;Usage:\n&#x27;</span>
        + originUrl.<span class="hljs-property">origin</span> + <span class="hljs-string">&#x27;/&#123;uri&#125;\n&#x27;</span>
        + <span class="hljs-string">&#x27;Header x-cors-proxy-api-key must be set with valid api key\n&#x27;</span>
        + <span class="hljs-string">&#x27;Header origin or x-requested-with must be set\n\n&#x27;</span>
        <span class="hljs-comment">// + &#x27;Limits: 100,000 requests/day\n&#x27;</span>
        <span class="hljs-comment">// + &#x27;          1,000 requests/10 minutes\n\n&#x27;</span>
        + (origin === <span class="hljs-literal">null</span> ? <span class="hljs-string">&#x27;&#x27;</span> : <span class="hljs-string">&#x27;Origin: &#x27;</span> + origin + <span class="hljs-string">&#x27;\n&#x27;</span>)
        + <span class="hljs-string">&#x27;Ip: &#x27;</span> + remIp + <span class="hljs-string">&#x27;\n&#x27;</span>
        + (country ? <span class="hljs-string">&#x27;Country: &#x27;</span> + country + <span class="hljs-string">&#x27;\n&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>)
        + (colo ? <span class="hljs-string">&#x27;Datacenter: &#x27;</span> + colo + <span class="hljs-string">&#x27;\n&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>) + <span class="hljs-string">&#x27;\n&#x27;</span>
        + ((corsHeaders === <span class="hljs-literal">null</span>) ? <span class="hljs-string">&#x27;&#x27;</span> : <span class="hljs-string">&#x27;\nx-cors-headers: &#x27;</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(corsHeaders)),
		&#123;<span class="hljs-attr">status</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">headers</span>: myHeaders&#125;,
	);
&#125;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) &#123;
	<span class="hljs-keyword">const</span> &#123;protocol, pathname&#125; = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);
	<span class="hljs-comment">// In the case of a &quot;Basic&quot; authentication, the exchange MUST happen over an HTTPS (TLS) connection to be secure.</span>
	<span class="hljs-keyword">if</span> (protocol !== <span class="hljs-string">&#x27;https:&#x27;</span> || request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-forwarded-proto&#x27;</span>) !== <span class="hljs-string">&#x27;https&#x27;</span>) &#123;
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">&#x27;Must use a HTTPS connection.&#x27;</span>);
	&#125;

	<span class="hljs-keyword">switch</span> (pathname) &#123;
		<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/favicon.ico&#x27;</span>:
		<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/robots.txt&#x27;</span>:
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-literal">null</span>, &#123;<span class="hljs-attr">status</span>: <span class="hljs-number">204</span>&#125;);
		<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:
			<span class="hljs-keyword">return</span> <span class="hljs-title function_">homeRequest</span>(request);
		<span class="hljs-attr">default</span>: &#123;
			<span class="hljs-comment">// Not 100% sure if this is a good idea…</span>
			<span class="hljs-comment">// Right now all OPTIONS requests are just simply replied to because otherwise they fail.</span>
			<span class="hljs-comment">// This is necessary because apparently, OPTIONS requests do not carry the `x-cors-proxy-api-key` header so this can not be authorized.</span>
			<span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">&#x27;OPTIONS&#x27;</span>) &#123;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-literal">null</span>, &#123;
					<span class="hljs-attr">headers</span>: <span class="hljs-title function_">fix</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>(), request, <span class="hljs-literal">true</span>),
					<span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
					<span class="hljs-attr">statusText</span>: <span class="hljs-string">&#x27;OK&#x27;</span>,
				&#125;);
			&#125;

			<span class="hljs-comment">// The &quot;x-cors-proxy-api-key&quot; header is sent when authenticated.</span>
			<span class="hljs-comment">//if (request.headers.has(&#x27;x-cors-proxy-api-key&#x27;)) &#123;</span>
				<span class="hljs-comment">// Throws exception when authorization fails.</span>
				<span class="hljs-comment">//const activeApiKey = verifyCredentials(request);</span>

				<span class="hljs-comment">// Only returns this response when no exception is thrown.</span>
				<span class="hljs-keyword">return</span> <span class="hljs-title function_">proxyRequest</span>(request);
			<span class="hljs-comment">//&#125;</span>

			<span class="hljs-comment">// Not authenticated.</span>
			<span class="hljs-comment">//throw new UnauthorizedException(&#x27;Valid x-cors-proxy-api-key header has to be provided.&#x27;);</span>
		&#125;
	&#125;
&#125;

<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;fetch&#x27;</span>, <span class="hljs-keyword">async</span> event =&gt; &#123;
	event.<span class="hljs-title function_">respondWith</span>(
		<span class="hljs-title function_">handleRequest</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;
			<span class="hljs-keyword">const</span> message = error.<span class="hljs-property">reason</span> || error.<span class="hljs-property">stack</span> || <span class="hljs-string">&#x27;Unknown Error&#x27;</span>;

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(message, &#123;
				<span class="hljs-attr">status</span>: error.<span class="hljs-property">status</span> || <span class="hljs-number">500</span>,
				<span class="hljs-attr">statusText</span>: error.<span class="hljs-property">statusText</span> || <span class="hljs-literal">null</span>,
				<span class="hljs-attr">headers</span>: &#123;
					<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain;charset=UTF-8&#x27;</span>,
					<span class="hljs-comment">// Disables caching by default.</span>
					<span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-store&#x27;</span>,
					<span class="hljs-comment">// Returns the &quot;Content-Length&quot; header for HTTP HEAD requests.</span>
					<span class="hljs-string">&#x27;Content-Length&#x27;</span>: message.<span class="hljs-property">length</span>,
				&#125;,
			&#125;);
		&#125;),
	);
&#125;);
</code></pre></details><h1 id="4-绑定域名"><a class="markdownIt-Anchor" href="#4-绑定域名"></a> 4. 绑定域名</h1><p>回到 Cloudflare 的域名管理面板，选择你刚刚托管的域名。</p><p>点击 Workers 进入域名中的 Workers 管理页面，然后点击 添加路由 设置新的路由。</p><p>路由 输入域名，加上子域名（你填的域名前缀），如 <code>qwe.example.com/*</code>。服务选择你的 Workers 名称，环境是 production。</p><h1 id="5-设置代理"><a class="markdownIt-Anchor" href="#5-设置代理"></a> 5. 设置代理</h1><p>对于 Cutie 主题，可将主题配置文件的 comments - gitalk - proxy 一项设置为：</p><pre class="highlight"><code class="yaml"><span class="hljs-attr">proxy:</span> <span class="hljs-string">&quot;&#x27;https://qwe.example.com/https://github.com/login/oauth/access_token&#x27;&quot;</span>
</code></pre><p>把 <code>qwe.example.com</code> 改成你申请的域名。</p><p>这样，Gitalk 就可以正常使用了。</p><br><hr><br><blockquote><br>本文作者：Yurchiu,Internet<br><br>本文链接：https://yz-hs.github.io/ef06bab11ae2/<br><br>版权声明：本博客中所有原创文章除特别声明外，均允许规范转载，转载请注明出处。所有非原创文章，按照原作者要求转载。<br><br></blockquote><br><div class="end-post-meta"><span><a href="/tags/转载"><i class="fa fa-tag"></i> 转载</a></span> <span><a href="/tags/技术"><i class="fa fa-tag"></i> 技术</a></span></div><div class="end-post-meta"><span><i class="fa fa-refresh"></i> 最后更新：2023-08-21, 23:18:20</span></div></div><div class="prevnext"><a class="prev" href="/97a612f5f987/">上一页</a> <a class="next" href="/460f3c480190/">下一页</a></div><div class="comments"><div class="giscus"></div><script>function my_giscus_load(){var t=document.createElement("script");t.setAttribute("src","https://giscus.app/client.js"),t.setAttribute("data-repo","yz-hs/no-star"),t.setAttribute("data-repo-id","R_kgDOKHnuhg"),t.setAttribute("data-category","General"),t.setAttribute("data-category-id","DIC_kwDOKHnuhs4CYog9"),t.setAttribute("data-mapping","pathname"),t.setAttribute("data-strict","0"),t.setAttribute("data-reactions-enabled","1"),t.setAttribute("data-emit-metadata","0"),t.setAttribute("data-input-position","top"),t.setAttribute("data-theme","light"),4==readData("color")&&t.setAttribute("data-theme","dark"),t.setAttribute("data-lang","zh-CN"),t.setAttribute("data-loading","lazy"),t.setAttribute("crossorigin","anonymous"),t.setAttribute("async","true"),document.head.appendChild(t)}my_giscus_load()</script></div><div class="avatar-container" style="padding:50px"><img src="/img/new-avatar.jpg" class="avatar revolve" style="height:12%;width:12%"><div style="text-align:center;margin-top:3%">By Yurchiu.</div></div></div><div class="vertical toolbar"><div class="tab-page"><div class="tabTitle tb-tabTitle"><ul><li class="current"><i class="fa fa-random"></i></li><li><i class="fa fa-refresh"></i></li><li><i class="fa fa-circle-o-notch"></i></li></ul></div><div class="tabContent tb-tabContent"><div><div class="title">随机文章<span class="sidetitle">回味旧文</span></div><div class="item no-lrpadding"><a class="post-link" href="/d24d99489782/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">2020 新年贺词</div></div></a><a class="post-link" href="/3513c6ef3e31/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">2021，初中毕业</div></div></a><a class="post-link" href="/3f5d366e12dd/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">一个 4 人囚徒困境的必胜策略</div></div></a><a class="post-link" href="/501647d25831/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">AFO 有感</div></div></a><a class="post-link" href="/ed885af1fef5/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">ASCII 艺术</div></div></a><a class="post-link" href="/1ed002c31ce3/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">CSP-J1 游记</div></div></a><a class="post-link" href="/2ab979d324b5/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">BSGS 与 exBSGS</div></div></a></div></div><div class="hide"><div class="title">最近更新<span class="sidetitle">旧文更新</span></div><div class="item no-lrpadding"><a class="post-link" href="/7f6900191ad2/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">[Works] 自白</div></div></a><a class="post-link" href="/251a7b12764a/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">[Works] 自白 终章</div></div></a><a class="post-link" href="/f2963a0c0e8d/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">SDSC 2021 游记</div></div></a><a class="post-link" href="/5f04cc136ab4/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">《幽默报 6》</div></div></a><a class="post-link" href="/d7884a43c481/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">大佬摘录</div></div></a><a class="post-link" href="/f1c417b84c83/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">错误档案</div></div></a><a class="post-link" href="/dbd6ef846d33/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">树状数组</div></div></a></div></div><div class="hide"><div class="title">其他物件<a data-bs-toggle="tooltip" href="javascript: document.body.contentEditable='true';
    document.designMode='on';void(0);" title="彩蛋：点击我，可以编辑本页面！" target="_self" class="sidetitle">杂物收纳</a></div><div style="height:10px"></div><div class="item"><tag style="display:inline-block">Hitokoto</tag><br><br><div id="hitokoto">Yurchiu 说，除了她以外的人都很强！嘤嘤嘤~~</div><script>fetch("https://v1.hitokoto.cn").then(function(t){return t.json()}).then(function(t){$("#hitokoto").html(t.hitokoto+"<br><br><div style='text-align: right;'>——"+t.from+"</div>")}).catch(function(t){console.error(t)})</script></div><div class="item"><div id="timeprogress"></div><script>var myDate=new Date,hours=myDate.getHours(),minutes=myDate.getMinutes(),pro=(minutes=60*hours+minutes)/14.4,innerhtml="        <div class='progress' style='height: 20px'>          <div data-bs-toggle='tooltip'               class='progress-bar'               title='时间已过去了 "+pro.toFixed(2)+"%'               style='width: "+pro+"%;               background: #4caf50; color: #fff;'>"+pro.toFixed(0)+"%          </div>        </div>";document.getElementById("timeprogress").innerHTML=innerhtml</script></div></div></div></div><div class="item"><div class="title">博客信息</div><div class="list-group"><div class="list-group-item"><div><i class="fa fa-file-text-o fa-fw"></i> 文章数目</div><div class="badge">160</div></div><div class="list-group-item"><div><i class="fa fa-refresh fa-fw"></i> 最近更新</div><div class="badge">08-21</div></div><div class="list-group-item"><div><i class="fa fa-font fa-fw"></i> 本站字数</div><div class="badge">343.2k</div></div></div></div><div class="post-toc"><div class="title">文章目录</div><div class="post-toc-inner"></div></div><script>tocbot.init({tocSelector:".post-toc-inner",contentSelector:".post-text",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0})</script><script>$(function(){var i=$(".tb-tabTitle>ul>li"),n=$(".tb-tabContent>div");i.click(function(){var t=$(this);setTimeout(function(){t.addClass("current").siblings().removeClass("current");var i=t.index();n.eq(i).show().siblings().hide()})})})</script></div></div><div class="footer"><p class="text-left">©2019-2023 <a target="_blank" rel="noopener" href="https://github.com/yz-hs">Yurchiu</a>. All rights reserved.</p><p class="text-right">Theme <a target="_blank" rel="noopener" href="https://github.com/yz-hs/cutie">Cutie</a>, by Yurchiu.</p></div><div class="natsuki-container" style="width:120px" data-bs-toggle="tooltip" title="Don't touch me! qwq"><img id="natsuki2" width="100%" height="100%" src="/img/natsuki2.png"> <img id="natsuki1" width="100%" height="100%" src="/img/natsuki1.png"></div><script type="text/javascript">$("#natsuki1").click(function(){$("#natsuki1").hide(),$("#natsuki2").show(),$("#natsuki2").css("animation","natsuki 0.55s cubic-bezier(0, 0, 0, 1)")}),$("#natsuki2").each(function(){$(this)[0].addEventListener("animationend",function(){$("#natsuki2").hide(),$("#natsuki1").show(),$(this).css("animation","")})})</script><script>readData("special")||$("html").addClass("none")</script><script>readData("color")||$("html").addClass("color-white"),4==readData("color")&&($("body").css("opacity","0.85"),$("body").css("background-image","url(/img/night-bgp.jpg)")),$("img").attr("onerror","this.src='/img/error.jpg';this.onerror=null"),initial()</script></div><meting-js class="meting-js appear" fixed="ture" server="netease" type="playlist" id="8524070964"></meting-js><script>consolePrint(),HideIt()</script><link rel="stylesheet" href="/custom/custom.css"><script src="/custom/custom.js"></script></body></html>